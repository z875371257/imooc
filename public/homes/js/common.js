function Destm(t,a){function e(t,a){var e="";if("object"==typeof t)for(var r in t)e+=String.fromCharCode(t[r]);t=e||t;for(var n,o,i=new Uint8Array(t.length),s=a.length,r=0;r<t.length;r++)o=r%s,n=t[r],n=n.toString().charCodeAt(0),i[r]=n^a.charCodeAt(o);return i}function r(t){var a="";if("object"==typeof t)for(var e in t)a+=String.fromCharCode(t[e]);t=a||t;var r=new Uint8Array(t.length);for(e=0;e<t.length;e++)r[e]=t[e].toString().charCodeAt(0);var n,o,e=0;for(e=0;e<r.length;e++)n=r[e]%3,0!=n&&e+n<r.length&&(o=r[e+1],r[e+1]=r[e+n],r[e+n]=o,e=e+n+1);return r}function n(t){var a="";if("object"==typeof t)for(var e in t)a+=String.fromCharCode(t[e]);t=a||t;var r=new Uint8Array(t.length);for(e=0;e<t.length;e++)r[e]=t[e].toString().charCodeAt(0);var e=0,n=0,o=0,i=0;for(e=0;e<r.length;e++)o=r[e]%2,o&&e++,i++;var s=new Uint8Array(i);for(e=0;e<r.length;e++)o=r[e]%2,s[n++]=o?r[e++]:r[e];return s}function o(t,a){var e=0,r=0,n=0,o=0,i="";if("object"==typeof t)for(var e in t)i+=String.fromCharCode(t[e]);t=i||t;var s=new Uint8Array(t.length);for(e=0;e<t.length;e++)s[e]=t[e].toString().charCodeAt(0);for(e=0;e<t.length;e++)if(o=s[e]%5,0!=o&&1!=o&&e+o<s.length&&(n=s[e+1],r=e+2,s[e+1]=s[e+o],s[o+e]=n,e=e+o+1,e-2>r))for(;e-2>r;r++)s[r]=s[r]^a.charCodeAt(r%a.length);for(e=0;e<t.length;e++)s[e]=s[e]^a.charCodeAt(e%a.length);return s}function i(t){var a,e,r,n,o,i,s;for(i=t.length,o=0,s="";i>o;){do a=f[255&t.charCodeAt(o++)];while(i>o&&-1==a);if(-1==a)break;do e=f[255&t.charCodeAt(o++)];while(i>o&&-1==e);if(-1==e)break;s+=String.fromCharCode(a<<2|(48&e)>>4);do{if(r=255&t.charCodeAt(o++),61==r)return s;r=f[r]}while(i>o&&-1==r);if(-1==r)break;s+=String.fromCharCode((15&e)<<4|(60&r)>>2);do{if(n=255&t.charCodeAt(o++),61==n)return s;n=f[n]}while(i>o&&-1==n);if(-1==n)break;s+=String.fromCharCode((3&r)<<6|n)}return s}for(var s={data:{info:t}},c={q:e,h:r,m:n,k:o},l=s.data.info,d=l.substring(l.length-4).split(""),h=0;h<d.length;h++)d[h]=d[h].toString().charCodeAt(0)%4;d.reverse();for(var u=[],h=0;h<d.length;h++)u.push(l.substring(d[h]+1,d[h]+2)),l=l.substring(0,d[h]+1)+l.substring(d[h]+2);s.data.encrypt_table=u,s.data.key_table=[];for(var h in s.data.encrypt_table)("q"==s.data.encrypt_table[h]||"k"==s.data.encrypt_table[h])&&(s.data.key_table.push(l.substring(l.length-12)),l=l.substring(0,l.length-12));s.data.key_table.reverse(),s.data.info=l;var f=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);s.data.info=i(s.data.info);for(var h in s.data.encrypt_table){var p=s.data.encrypt_table[h];if("q"==p||"k"==p){var m=s.data.key_table.pop();s.data.info=c[s.data.encrypt_table[h]](s.data.info,m)}else s.data.info=c[s.data.encrypt_table[h]](s.data.info)}if(a)return s.data.info;var g="";for(h=0;h<s.data.info.length;h++)g+=String.fromCharCode(s.data.info[h]);return g}define("fingerprintjs",["/static/lib/fingerprintjs2/fingerprintjs2.min.js"],function(){OP_CONFIG&&(new Fingerprint2).get(function(t){OP_CONFIG.browser_key=t})}),requirejs(["fingerprintjs"]),define("registlogin",["/static/lib/login-regist/login-regist.js"],function(a){$(function(){function e(){h=$(window).height(),t=$(document).scrollTop(),t>=768?$("#backTop").show():$("#backTop").hide()}$("#js-signin-btn").on("click",function(t){t.preventDefault(),a.init()}),$("#js-signup-btn").on("click",function(t){t.preventDefault(),a.signup()}),$("#backTop").click(function(){$("html,body").animate({scrollTop:0},200)}),$(window).scroll(function(){e()})})}),requirejs(["registlogin"]),define("loadsocket",["common/js/chat"],function(){$.chat.init(),OP_CONFIG.userInfo&&$.ajax({url:"http://www.imooc.com/u/loading",dataType:"jsonp",success:function(t){if(0==t.result){var a=window.location.href.indexOf("notices"),e=window.location.href.indexOf("messages");t.data.remind>0?(_not_unread=1,$(".msg_remind").show(),(-1!=a||-1!=e)&&(t.data.remind>99?$("#not_new").find(".not-num").html("99+").show():$("#not_new").find(".not-num").html("("+t.data.remind+")").show())):(_not_unread=0,_msg_unread||$(".msg_remind").hide())}}})}),requirejs(["loadsocket"]),!function(){var t,a,e,r;if(a=window.navigator.userAgent,e=/;\s*MSIE (\d+).*?;/.exec(a),e&&+e[1]<9){if(t=document.cookie.match(/(?:^|;)\s*ic=(\d)/),t&&t[1])return;r=$(["<div id='js-compatible' class='compatible-contianer'>","<p class='cpt-ct'><i></i>您的浏览器版本过低。为保证最佳学习体验，<a href='http://www.imooc.com/static/html/browser.html'>请点此更新高版本浏览器</a></p>","<div class='cpt-handle'><a href='javascript:;' class='cpt-agin'>以后再说</a><a href='javascript:;' class='cpt-close'><i></i></a>","</div>"].join("")),$("body").prepend(r),r.width(),$("#js-compatible .cpt-agin").click(function(){var t=new Date;t.setTime(t.getTime()+2592e6),document.cookie="ic=1; expires="+t.toGMTString()+"; path=/",$("#js-compatible").remove()}),$("#js-compatible .cpt-close").click(function(){$("#js-compatible").remove()})}}(),define("globalSearch",["common/js/suggest"],function(t){var a=function(){$.ajax({url:"http://coding.imooc.com/class/ajaxsearchwords",type:"GET",dataType:"jsonp",jsonpCallback:"searchKeys",jsonp:"callback"}).done(function(t){if(0==t.result&&t.data.length>0){for(var a="",e=0;e<t.data.length;e++)a+='<a href="'+t.data[e].links+'" target="_blank">'+t.data[e].name+"</a>";$(".js-searchtags").html(a).show(),$(".search-input").attr("placeholder","")}})};a();var e=$('[data-search="top-banner"]'),r=new t(e),n=($(".search-area"),$(".showhide-search")),o=$(".search-input");$("#nav").on("click",".showhide-search",function(t){var a=$(this).attr("data-show");return"no"==a?(i(),o.focus()):""==o.val()?s():r.search(o.val()),t.stopPropagation(),!1}),$("#nav").on("click",".search-area",function(t){return t.stopPropagation(),!1}),$("#nav").on("click",".search-input",function(){$(".searchTags").hide()}),$("#nav").on("blur",".search-input",function(){0==$(this).val().length&&$(".searchTags").show()}),$("#nav").on("click",".showhide-search",function(t){$(".searchTags").hide();var a=$(this).attr("data-show");return"no"==a?(i(),o.focus()):""==o.val()?s():r.search(o.val()),t.stopPropagation(),!1});var i=function(){n.attr("data-show","yes")},s=function(){}}),requirejs(["globalSearch"]),define("certificate",function(){var t=function(){$("#certificate-mode").show(),$("#certificate-mode-opt").show()},a=function(){$("#certificate-mode").hide(),$("#certificate-mode-opt").hide()};$(document).on("click",".js-look-certificate",function(){t()}),$("#certificate-mode-opt").on("click",function(){a()});var e=!1;$(document).on("click",".js-generate-report",function(){if(!e){e=!0;var t={};t.plan_id=$("#certificate-mode").data("id"),$.post("/sc/snapshot",t,function(a){if(e=!1,a.result){var r="/sc/"+t.plan_id+"/"+OP_CONFIG.userInfo.uid+"/data";window.location.href=r}},"json")}})}),requirejs(["certificate"]),define("initCartNumber",["common/js/cart"],function(){$.ajax({url:"http://order.imooc.com/pay/cartorder",dataType:"jsonp",jsonp:"jsonpcallback",success:function(t){if(0==t.result&&(t.data.order&&1*t.data.order&&$(".js-cart-num").attr("data-ordernum",t.data.order),t.data.cart&&1*t.data.cart)){var a=parseInt(t.data.order);$(".js-cart-num").attr("data-cartnum",t.data.cart),$(".js-cart-num").html(parseInt(t.data.cart)+a).show()}},complete:function(){$.initGetCart()}})}),requirejs(["initCartNumber"]),define("showMoreInfo",function(){OP_CONFIG.isLogin&&$.ajax({url:"http://order.imooc.com/service/index/lastlearn",dataType:"jsonp",jsonp:"jsonpcallback",success:function(t){if(0==t.result){var a=t.data;if($("#js-user-credit").html(a._other.userCredit),"undefined"!=typeof a.course_name){var e='<span class="history-item">                                        <span class="tit text-ellipsis">'+a.course_name+'</span>                                        <span class="media-name text-ellipsis">                                            '+a.last_chapter_media+a.media_name+'                                        </span>                                        <i class="imv2-history"></i>                                        <a href="'+a.url+'" class="continue" title="'+a.media_name+"&#10;"+a.last_chapter_media+a.media_name+'">继续</a>                                    </span>';$(".card-history").html(e)}0!=a._other.my_coupon?$("#js-usercard-coupon-icon").css("display","block"):$("#js-usercard-coupon-icon").hide()}else $.alert(t.msg)}})}),requirejs(["showMoreInfo"]),define("showUserInfo",function(){var t=0;-2==OP_CONFIG.userout&&$.alert("你的账号在另一地点登录，已被强迫下线。",{info:"如果不是本人操作，建议你修改密码。",callback:function(){window.location.href="http://www.imooc.com/course/program"}}),$("#header-user-card").on("mouseenter",function(){clearTimeout(t),$(this).hasClass("hover")||$(this).addClass("hover")}).on("mouseleave",function(a){a.stopPropagation();var e=$(this);t=setTimeout(function(){e.hasClass("hover")&&e.removeClass("hover")},300)})}),requirejs(["showUserInfo"]),requirejs(["common/js/cart"]),define("showUserCart",function(){var t=0;$("#shop-cart").on("mouseenter",function(){clearTimeout(t),$(this).hasClass("hover")||($(this).addClass("hover"),$("#nav").css("z-index","99999"))}).on("mouseleave",function(a){a.stopPropagation();var e=$(this);t=setTimeout(function(){e.hasClass("hover")&&(e.removeClass("hover"),$("#nav").css("z-index","auto"))},300)})}),requirejs(["showUserCart"]),define("delCartGoods",function(){$("#js-my-cart").on("click",".js-close",function(){var t=this,a=$(t).parents(".js-item"),e=a.data("typeid"),r=a.data("type"),n=a.data("goodsid"),o={type_id:e,type:r,goods_id:n};$.ajax({url:"http://order.imooc.com/pay/delcartgoods",dataType:"jsonp",data:o,jsonp:"jsonpcallback",success:function(t){if("0"==t.result){a.remove();var e=parseInt($(".js-cart-num").attr("data-cartnum"));$(".js-cart-num").attr("data-cartnum",parseInt(e-1));var r=$("#js-card-ul").find("li").length;if(0==r){var n='<div class="cart-title-box clearfix">                                        <h2 class="l">我的购物车</h2>                                        <h5 class="r">已加入<span class="js-incart-num">0</span>门课程</h5>                                    </div>                                    <div class="cart-wrap">                                        <div class="clear-cart">                                            <span class="cartIcon imv2-cart"></span>                                            <h3>购物车里空空如也</h3>                                            <div class="text">快去这里选购你中意的课程</div>                                            <p><a class="go-link" href="//coding.imooc.com" target="_blank">实战课程</a></p>                                            <p><a class="go-link" href="//www.imooc.com/course/program" target="_blank">职业路径</a></p>                                        </div>                                    </div>                                    <div class="more-box clearfix">                                        <div class="l show-box">                                            <span class="text"><a href="http://order.imooc.com/myorder" target="_blank">我的订单中心</a></span>                                        </div>                                        <a href="http://order.imooc.com/pay/cart" target="_blank" class="r moco-btn moco-btn-red go-cart">去购物车</a>                                    </div>';$("#js-my-cart").html(n),$(".js-cart-num").html("").hide()}else{var o=parseInt($(".js-cart-num").html()),i=parseInt($(".js-cart-num").attr("data-cartnum"));$(".js-cart-num").html(parseInt(o-1)).attr("data-cartnum",parseInt(i-1));var s=parseInt($(".js-incart-num").html());$(".js-incart-num").html(parseInt(s-1))}}else $.alert(t.msg)}})})}),requirejs(["delCartGoods"]),requirejs(["common/js/complete_user_info"]),OP_CONFIG.usercaution&&OP_CONFIG.usercaution.length>0&&($.alert?$.alert("警告",{info:'<span style="font-size: 14px; line-height: 24px;">'+OP_CONFIG.usercaution+"</span>",callback:function(){window.location.href="http://class.imooc.com/passport/user/logout?referer=http://class.imooc.com"}}):(alert(OP_CONFIG.usercaution),window.location.href="http://class.imooc.com/passport/user/logout?referer=http://class.imooc.com"));